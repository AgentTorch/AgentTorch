
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../config_api/">
      
      
        <link rel="next" href="../configure-behavior/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Customizing the Population - AgentTorch</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-generating-base-population-and-household-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AgentTorch" class="md-header__button md-logo" aria-label="AgentTorch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AgentTorch
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Customizing the Population
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AgentTorch" class="md-nav__button md-logo" aria-label="AgentTorch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AgentTorch
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Framework Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-a-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using the Config API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Customizing the Population
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Customizing the Population
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    <span class="md-ellipsis">
      Before Starting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Before Starting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#columns-description" class="md-nav__link">
    <span class="md-ellipsis">
      Columns Description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Columns Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-entry" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns-description_1" class="md-nav__link">
    <span class="md-ellipsis">
      Columns Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-entry_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-set-up-file-paths" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Set Up File Paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-define-age-group-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Define Age Group Mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-load-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Load Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-set-up-additional-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Set Up Additional Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-initialize-the-census-data-loader" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Initialize the Census Data Loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-generate-base-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Generate Base Population Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 6: Generate Base Population Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-the-generated-base-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Generated Base Population Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-generate-household-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Generate Household Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-generate-population-data-of-specific-size" class="md-nav__link">
    <span class="md-ellipsis">
      Bonus: Generate Population Data of Specific Size
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-export-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Bonus: Export Population Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configure-behavior/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompting LLM as LPM agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calibrating-a-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gradient-based Calibration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-beckn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    From Simulation to Reality
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-archetypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmark: Modeling with Archetypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compare-llm-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmark: Sensitivity to Agent Behaviors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../differentiable-discrete-sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Differentiable Discrete Sampling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" class="md-nav__link">
    <span class="md-ellipsis">
      Before Starting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Before Starting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#columns-description" class="md-nav__link">
    <span class="md-ellipsis">
      Columns Description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Columns Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-entry" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns-description_1" class="md-nav__link">
    <span class="md-ellipsis">
      Columns Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-entry_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example Entry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-set-up-file-paths" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Set Up File Paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-define-age-group-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Define Age Group Mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-load-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Load Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-set-up-additional-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Set Up Additional Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-initialize-the-census-data-loader" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Initialize the Census Data Loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-generate-base-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Generate Base Population Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 6: Generate Base Population Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-the-generated-base-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Generated Base Population Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-generate-household-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Generate Household Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-generate-population-data-of-specific-size" class="md-nav__link">
    <span class="md-ellipsis">
      Bonus: Generate Population Data of Specific Size
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-export-population-data" class="md-nav__link">
    <span class="md-ellipsis">
      Bonus: Export Population Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="tutorial-generating-base-population-and-household-data">Tutorial: Generating Base Population and Household Data</h1>
<p>This tutorial will guide you through the process of generating base population
and household data for a specified region using census data. We’ll use a
<code>CensusDataLoader</code> class to handle the data processing and generation.</p>
<h2 id="before-starting">Before Starting</h2>
<p>Make sure your <code>population data</code> and <code>household data</code> are in the prescribed
format. Names of the column need to be same as shown in the excerpts.</p>
<p>Lets see a snapshot of the data</p>
<p><code>Population Data</code> is a dictionary containing two pandas DataFrames:
'<code>age_gender</code>' and '<code>ethnicity</code>'. Each DataFrame provides demographic
information for different areas and regions.</p>
<p>The <code>age_gender</code> DataFrame provides a comprehensive breakdown of population
data, categorized by area, gender, and age group.</p>
<h4 id="columns-description">Columns Description</h4>
<ul>
<li><code>area</code>: Serves as a unique identifier for each geographical area, represented
  by a string (e.g., <code>'BK0101'</code>, <code>'SI9593'</code>).</li>
<li><code>gender</code>: Indicates the gender of the population segment, with possible values
  being <code>'female'</code> or <code>'male'</code>.</li>
<li><code>age</code>: Specifies the age group of the population segment, using a string
  format such as <code>'20t29'</code> for ages 20 to 29, and <code>'U19'</code> for those under 19
  years of age.</li>
<li><code>count</code>: Represents the total number of individuals within the specified
  gender and age group for a given area.</li>
<li><code>region</code>: A two-letter code that identifies the broader region encompassing
  the area (e.g., <code>'BK'</code> for Brooklyn, <code>'SI'</code> for Staten Island).</li>
</ul>
<h5 id="example-entry">Example Entry</h5>
<p>Here is a sample of the data structure within the <code>age_gender</code> DataFrame:</p>
<table>
<thead>
<tr>
<th>area</th>
<th>gender</th>
<th>age</th>
<th>count</th>
<th>region</th>
</tr>
</thead>
<tbody>
<tr>
<td>BK0101</td>
<td>female</td>
<td>20t29</td>
<td>3396</td>
<td>BK</td>
</tr>
<tr>
<td>BK0101</td>
<td>male</td>
<td>20t29</td>
<td>3327</td>
<td>BK</td>
</tr>
</tbody>
</table>
<p>This example entry demonstrates the DataFrame's layout and the type of
demographic data it contains, highlighting its utility for detailed population
studies by age and gender.</p>
<p>The <code>ethnicity</code> DataFrame is structured to provide detailed population data,
segmented by both geographical areas and ethnic groups.</p>
<h5 id="columns-description_1">Columns Description</h5>
<ul>
<li><code>area</code>: A unique identifier assigned to each area, formatted as a string
  (e.g., <code>'BK0101'</code>, <code>'SI9593'</code>). This identifier helps in pinpointing specific
  locations within the dataset.</li>
<li><code>ethnicity</code>: Represents the ethnic group of the population in the specified
  area.</li>
<li><code>count</code>: Indicates the number of individuals belonging to the specified ethnic
  group within the area. This is an integer value representing the population
  count.</li>
<li><code>region</code>: A two-letter code that signifies the broader region that the area
  belongs to (e.g., <code>'BK'</code> for Brooklyn, <code>'SI'</code> for Staten Island).</li>
</ul>
<h5 id="example-entry_1">Example Entry</h5>
<p>Below is an example of how the data is presented within the DataFrame:</p>
<table>
<thead>
<tr>
<th>area</th>
<th>ethnicity</th>
<th>count</th>
<th>region</th>
</tr>
</thead>
<tbody>
<tr>
<td>BK0101</td>
<td>asian</td>
<td>1464</td>
<td>BK</td>
</tr>
<tr>
<td>BK0101</td>
<td>black</td>
<td>937</td>
<td>BK</td>
</tr>
</tbody>
</table>
<p>This example illustrates the structure and type of data contained within the
<code>ethnicity</code> DataFrame, showcasing its potential for detailed demographic
studies.</p>
<p><code>Household Data</code> contains the following columns:</p>
<ul>
<li><code>area</code>: Represents a unique identifier for each area.</li>
<li><code>people_num</code>: The total number of people within the area.</li>
<li><code>children_num</code>: The number of children in the area.</li>
<li><code>household_num</code>: The total number of households.</li>
<li><code>family_households</code>: Indicates the number of households identified as family
  households, highlighting family-based living arrangements.</li>
<li><code>nonfamily_households</code>: Represents the number of households that do not fall
  under the family households category, including single occupancy and unrelated
  individuals living together.</li>
<li><code>average_household_size</code>: The average number of individuals per household.</li>
</ul>
<p>Below is a sample excerpt:</p>
<table>
<thead>
<tr>
<th>area</th>
<th>people_num</th>
<th>children_num</th>
<th>household_num</th>
<th>family_households</th>
<th>nonfamily_households</th>
<th>average_household_size</th>
</tr>
</thead>
<tbody>
<tr>
<td>100100</td>
<td>104</td>
<td>56</td>
<td>418</td>
<td>1</td>
<td>0</td>
<td>2.488038</td>
</tr>
<tr>
<td>100200</td>
<td>132</td>
<td>73</td>
<td>549</td>
<td>1</td>
<td>0</td>
<td>2.404372</td>
</tr>
<tr>
<td>100300</td>
<td>5</td>
<td>0</td>
<td>10</td>
<td>0</td>
<td>1</td>
<td>5.000000</td>
</tr>
</tbody>
</table>
<p>Now that we have verified our input, we can proceed to next steps!</p>
<h2 id="step-1-set-up-file-paths">Step 1: Set Up File Paths</h2>
<p>First, we need to specify the paths to our data files.</p>
<p>Make sure to replace the placeholder paths with the actual paths to your data
files.</p>
<pre><code class="language-python"># Path to the population data file. Update with the actual file path.
POPULATION_DATA_PATH = &quot;docs/tutorials/processing-a-population/sample_data/NYC/population.pkl&quot;

# Path to the household data file. Update with the actual file path.
HOUSEHOLD_DATA_PATH = &quot;docs/tutorials/processing-a-population/sample_data/NYC/household.pkl&quot;
</code></pre>
<h2 id="step-2-define-age-group-mapping">Step 2: Define Age Group Mapping</h2>
<p>We’ll define a mapping for age groups to categorize adults and children in the
household data:</p>
<pre><code class="language-python">AGE_GROUP_MAPPING = {
    &quot;adult_list&quot;: [&quot;20t29&quot;, &quot;30t39&quot;, &quot;40t49&quot;, &quot;50t64&quot;, &quot;65A&quot;],  # Age ranges for adults
    &quot;children_list&quot;: [&quot;U19&quot;],  # Age range for children
}
</code></pre>
<h2 id="step-3-load-data">Step 3: Load Data</h2>
<p>Now, let’s load the population and household data:</p>
<pre><code class="language-python">import numpy as np
import pandas as pd

# Load household data
HOUSEHOLD_DATA = pd.read_pickle(HOUSEHOLD_DATA_PATH)

# Load population data
BASE_POPULATION_DATA = pd.read_pickle(POPULATION_DATA_PATH)
</code></pre>
<h2 id="step-4-set-up-additional-parameters">Step 4: Set Up Additional Parameters</h2>
<p>We’ll set up some additional parameters that might be needed for data
processing. These are not essential for generating population, but still good to
know if you decide to use them in future.</p>
<pre><code class="language-python"># Placeholder for area selection criteria, if any. Update or use as needed.
# Example: area_selector = [&quot;area1&quot;, &quot;area2&quot;]
# This will be used to filter the population data to only include the selected areas.
area_selector = None

# Placeholder for geographic mapping data, if any. Update or use as needed.
geo_mapping = None
</code></pre>
<h2 id="step-5-initialize-the-census-data-loader">Step 5: Initialize the Census Data Loader</h2>
<p>Create an instance of the <code>CensusDataLoader</code> class:</p>
<pre><code class="language-python">from agent_torch.data.census.census_loader import CensusDataLoader

census_data_loader = CensusDataLoader(n_cpu=8, use_parallel=True)
</code></pre>
<p>This initializes the loader with 8 CPUs and enables parallel processing for
faster data generation.</p>
<h2 id="step-6-generate-base-population-data">Step 6: Generate Base Population Data</h2>
<p>Generate the base population data for a specified region:</p>
<pre><code class="language-python">census_data_loader.generate_basepop(
    input_data=BASE_POPULATION_DATA,  # The population data frame
    region=&quot;astoria&quot;,  # The target region for generating base population
    area_selector=area_selector,  # Area selection criteria, if applicable
)
</code></pre>
<p>This will create a base population of 100 individuals for the “astoria” region.
The generated data will be exported to a folder named “astoria” under the
“populations” folder.</p>
<h4 id="overview-of-the-generated-base-population-data">Overview of the Generated Base Population Data</h4>
<p>Each row corresponds to attributes of individual residing in the specified
region while generating the population.</p>
<table>
<thead>
<tr>
<th>area</th>
<th>age</th>
<th>gender</th>
<th>ethnicity</th>
<th>region</th>
</tr>
</thead>
<tbody>
<tr>
<td>BK0101</td>
<td>20t29</td>
<td>female</td>
<td>black</td>
<td>BK</td>
</tr>
<tr>
<td>BK0101</td>
<td>20t29</td>
<td>female</td>
<td>hispanic</td>
<td>BK</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>BK0101</td>
<td>U19</td>
<td>male</td>
<td>asian</td>
<td>SI</td>
</tr>
<tr>
<td>BK0101</td>
<td>U19</td>
<td>female</td>
<td>white</td>
<td>SI</td>
</tr>
<tr>
<td>BK0101</td>
<td>U19</td>
<td>male</td>
<td>asian</td>
<td>SI</td>
</tr>
</tbody>
</table>
<h2 id="step-7-generate-household-data">Step 7: Generate Household Data</h2>
<p>Finally, generate the household data for the specified region:</p>
<pre><code class="language-python">census_data_loader.generate_household(
    household_data=HOUSEHOLD_DATA,  # The loaded household data
    household_mapping=AGE_GROUP_MAPPING,  # Mapping of age groups for household composition
    region=&quot;astoria&quot;  # The target region for generating households
)
</code></pre>
<p>This will create household data for the “astoria” region based on the previously
generated base population. The generated data will be exported to the same
“astoria” folder under the “populations” folder.</p>
<h2 id="bonus-generate-population-data-of-specific-size">Bonus: Generate Population Data of Specific Size</h2>
<p>For quick experimentation, this may come in handy.</p>
<pre><code class="language-python">census_data_loader.generate_basepop(
    input_data=BASE_POPULATION_DATA,  # The population data frame
    region=&quot;astoria&quot;,  # The target region for generating base population
    area_selector=area_selector,  # Area selection criteria, if applicable
    num_individuals = 100 # Saves data for first 100 individuals, from the generated population
)
</code></pre>
<h2 id="bonus-export-population-data">Bonus: Export Population Data</h2>
<p>If you have already generated your synthetic population, you just need to export
it to "populations" folder under the desired "region", in order for you to use
it with AgentTorch.</p>
<pre><code class="language-python">POPULATION_DATA_PATH = &quot;/population_data.pickle&quot;  # Replace with actual path
census_data_loader.export(population_data_path=POPULATION_DATA_PATH,region=&quot;astoria&quot;)
</code></pre>
<p>In case you want to export data for only few individuals</p>
<pre><code class="language-python">census_data_loader.export(population_data_path=POPULATION_DATA_PATH,region=&quot;astoria&quot;,num_individuals = 100)
</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>You have now successfully generated both base population and household data for
the <code>“astoria”</code> region. The generated data can be found in the
<code>“populations/astoria”</code> folder. You can modify the region name, population size,
and other parameters to generate data for different scenarios.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>